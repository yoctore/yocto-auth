{
  "name": "yocto-api",
  "main": "src/index.js",
  "version": "0.3.0",
  "private": true,
  "description": "Yocto REST API ",
  "homepage": "http://www.yocto.re",
  "repository": {
    "type": "git",
    "url": "git+ssh://git@gitlab.com/yocto-node-modules/yocto-api.git"
  },
  "keywords": [
    "API",
    "REST"
  ],
  "author": {
    "name": "Yocto SAS",
    "email": "http://www.yocto.re"
  },
  "contributors": [
    {
      "name": "BALARD CÃ©dric",
      "email": "cedric@yocto.re"
    }
  ],
  "engines": {
    "node": ">=0.12.2"
  },
  "files": [
    "src",
    "documentation",
    "example"
  ],
  "dependencies": {
    "body-parser": "1.14.0",
    "ejs": "2.3.4",
    "express": "4.13.3",
    "glob": "5.0.14",
    "grunt-todo": "0.5.0",
    "http-status": "0.2.0",
    "joi": "6.7.1",
    "lodash": "3.10.1",
    "superagent": "1.4.0",
    "yocto-logger": "git+ssh://git@gitlab.com/yocto-node-modules/yocto-logger.git"
  },
  "peerDependencies": {
    "mongoose": "4.1.7"
  },
  "devDependencies": {
    "chai": "3.3.0",
    "grunt": "0.4.5",
    "grunt-contrib-nodeunit": "0.4.1",
    "grunt-contrib-uglify": "0.9.2",
    "grunt-contrib-yuidoc": "0.10.0",
    "grunt-mocha-cli": "1.14.0",
    "yocto-hint": "latest",
    "yocto-utils": "latest"
  },
  "apidoc": {
    "title": "Yocto Rest Api",
    "sampleUrl": "http://localhost:8080/api",
    "url": "http://localhost:8080/api"
  },
  "gitHead": "ce25e66d3ae01d6e1b09d85b567744761070c418",
  "readme": "# Yocto API\n\nThis is a REST API for yocto\n\nAll http requests that are implemented by the yocto rest api :\n  - get : get an object or all object\n  - head : it 's the same that get, but return only the header\n  - post : add a new object\n  - put : a full update of object\n  - patch : update a property of object that is specified\n  - delete : delete an object\n\nImportant : to use yocto-api, you should use the midlleware cors for express : https://www.npmjs.com/package/cors \n\n## apidoc\n\nApidoc is a tool that permit to generate documentation of our REST API from comments  https://github.com/apidoc/apidoc\n\nYou should add this main params in your package.json\n\nSampleUrl is the main url of your api, this params will be use in each method you will define\n\n```json\n\"apidoc\": {\n  \"title\": \"Yocto Rest Api\",\n  \"sampleUrl\": \"http://localhost:8080/api\",\n  \"url\": \"http://localhost:8080/api\"\n}\n```\n\n## apidocGenerator\n\nApidoc generator is a little module that read each model file and create a comments file that will be used by apidoc\n\n\n\n## Example :\n\n#### Using the api with a mongodb\n\n```javascript\n'use strict';\n\nvar express    = require('express'); // Load express\nvar bodyParser = require('body-parser'); // load bodyparser\nvar mongoose   = require('mongoose'); // Load the mongodb driver\nvar routes     = require('./app/routes/controller.js'); // Load the api\nvar app        = express(); // Create app\n\n// connect to our database\nmongoose.connect('mongodb://localhost:27017');\n\n// configure app to use bodyParser()\napp.use(bodyParser.urlencoded({ extended : true }));\napp.use(bodyParser.json());\n\n// set our port\nvar port = process.env.PORT || 8080;\n\n//Initialise the API router\nroutes.init();\n\n//Use the router\napp.use('/api', routes.router);\n\n// START THE SERVER\napp.listen(port);\n\n```\n\n\n#### model.json file\n\nEach Model is defined in one json file.\n\nIn this file an object \"apidoc\" is also declared to generate the doc automatically\n\nThe structure of the json is as follows :\n```json\n{\n  \"models\" : {\n    \"model\" : {}\n  },\n  \"apidoc\"  : {\n    \"methods\" : []\n  }\n}\n```\n\n\n##### model object\n\nA model have means a name, and one properties\n\nEach properties can be a type, required or/and an array.\n\n\n###### Example for firstaname that is a stirng required :  \n\n```json\n\"model\" : {\n  \"name\"       : \"user\",\n  \"properties\" : {\n    \"firstname\" : {\n      \"type\"      : \"String\",\n      \"required\"  : true\n    }\n  }\n}\n```\n\n\n###### Example for surname that is an optional String :  \n\n```json\n\"model\" : {\n  \"name\"       : \"user\",\n  \"properties\" : {\n    \"firstname\" : \"String\"\n  }\n}\n```\n\n\n###### Example for cart_id that is an optional array of ObjectId :\n\n```json\n\"model\" : {\n  \"name\"       : \"user\",\n  \"properties\" : {\n    \"cart_id\"   : [\"ObjectId\"]\n  }\n}\n```\n\n\n###### Example for category_id that is an required array of ObjectId :\n\n```json\n\"model\" : {\n  \"name\"       : \"user\",\n  \"properties\" : {\n    \"category_id\" : [\n      {\n      \"type\"     : \"ObjectId\",\n      \"required\" : true\n      }\n    ]\n  }\n}\n```\n\n###### Whole example :\n\n```json\n{\n  \"models\" : {\n    \"model\" : {\n      \"name\"       : \"product\",\n      \"properties\" : {\n        \"name\"  : {\n          \"type\"      : \"String\",\n          \"required\"  : true\n        },\n        \"reference\" : {\n          \"type\"      : \"String\",\n          \"required\"  : true\n        },\n        \"availability_id\" : [\"ObjectId\"],\n        \"category_id\"     : [{\n          \"type\"      : \"ObjectId\",\n          \"required\"  : true\n          }\n        ]\n      }\n    }\n  },\n  \"apidoc\" : {}\n}\n```\n\n##### apidoc object\n\nAn apidoc object can have lot of http methods, each method will create a new item in the doc\n\nAll this params are required :\n  - apiVersion : version of the api ( you can put multiple version of api)\n  - type : type of the request ( only : get, post, put, patch, delete, head)\n  - title : name of the method\n  - path : path of the method to test. We add path to sampleUrl declared in package.json. So your final url will be : 'sampleURL+path'\n  - apiPermission : the permission you should have to use it\n  - addDefaultParamFromModel : this option determine if you want add automatically params (thoose params are retrieve in model object), if it's false, none param will be added\n  - methoDescription : Description of the method\n\n###### specificParam\n\nThis array of object define all param you want add and which are not present in model.\n\nYou can specify if it's required\n\n```json\n\"methods\" : [\n  {\n    \"apiVersion\"    : \"0.1.0\",\n    \"type\"          : \"get\",\n    \"title\"         : \"GET product(s)\",\n    \"path\"          : \"/product/:product_id\",\n    \"apiPermission\"  : \"admin\",\n    \"addDefaultParamFromModel\" : false,\n    \"methodDescription\" : \"Method to retrieve one or all product, if you want get one product you should specify his id, otherwise the whole products are returned\",\n    \"specificParam\" : [\n      {\n          \"name\"     : \"product_id\",\n          \"type\"     : \"Object_id\",\n          \"required\" : true\n      }\n    ],\n  }\n]\n```\n\n\n###### apiSuccessExample param\n\nThis define the response that you will receive if your request is a success\n\nThey have default apiSuccess, you can call it by :\n\n```json\n\"methods\" : [\n  {\n    \"apiVersion\"    : \"0.1.0\",\n    \"type\"          : \"get\",\n    \"title\"         : \"GET product(s)\",\n    \"path\"          : \"/product/:product_id\",\n    \"apiPermission\"  : \"admin\",\n    \"addDefaultParamFromModel\" : false,\n    \"methodDescription\" : \"Method to retrieve one or all product, if you want get one product you should specify his id, otherwise the whole products are returned\",\n    \"apiSuccessExample\" : \"success\"\n  }\n]\n```\n\nOr specify you own response :\n\n```json\n\"methods\" : [\n  {\n    \"apiVersion\"    : \"0.1.0\",\n    \"type\"          : \"get\",\n    \"title\"         : \"GET product(s)\",\n    \"path\"          : \"/product/:product_id\",\n    \"apiPermission\"  : \"admin\",\n    \"addDefaultParamFromModel\" : false,\n    \"methodDescription\" : \"Method to retrieve one or all product, if you want get one product you should specify his id, otherwise the whole products are returned\",\n    \"apiSuccessExample\" : {\n      \"name\"    : \"Success-Response\",\n      \"addDefaultParamFromModel\" : true,\n      \"example\" : {\n        \"header\"  : \"HTTP/1.1 200 OK\"\n      }\n    }\n  }\n]\n```\n\n###### apiErrorrExample param\n\nThis define the response that you will receive if your request is a an error\n\nThey have default apiErrorrExample, you can call it by :\n\n```json\n\"methods\" : [\n  {\n    \"apiVersion\"    : \"0.1.0\",\n    \"type\"          : \"get\",\n    \"title\"         : \"GET product(s)\",\n    \"path\"          : \"/product/:product_id\",\n    \"apiPermission\"  : \"admin\",\n    \"addDefaultParamFromModel\" : false,\n    \"methodDescription\" : \"Method to retrieve one or all product, if you want get one product you should specify his id, otherwise the whole products are returned\",\n    \"apiErrorrExample\" : \"notFound\"\n  }\n]\n```\n\nOr specify you own response :\n\n```json\n\"methods\" : [\n  {\n    \"apiVersion\"    : \"0.1.0\",\n    \"type\"          : \"get\",\n    \"title\"         : \"GET product(s)\",\n    \"path\"          : \"/product/:product_id\",\n    \"apiPermission\"  : \"admin\",\n    \"addDefaultParamFromModel\" : false,\n    \"methodDescription\" : \"Method to retrieve one or all product, if you want get one product you should specify his id, otherwise the whole products are returned\",\n    \"apiErrorrExample\" : {\n      \"name\"    : \"Success-Response\",\n      \"addDefaultParamFromModel\" : true,\n      \"example\" : {\n        \"header\"  : \"HTTP/1.1 400 NOT OK\"\n      }\n    }\n  }\n]\n```\n\n#### routes.json file\n\nYou can add multiple routes in the json file\n\nYou can add alias for the main Object of the url (it's useful for plurial)\n\nBy default all http request are implemented, you can exclude each request\n\nYou can specify the name of one parameter to retrieve in the url\n\nYou should specify the name of the model that you want use\n\n```json\n{\n  \"routes\" : [\n    {\n      \"path\"                : \"/users/:user_id\",\n      \"alias\"               : [\"user\"],\n      \"model\"               : \"User\",\n      \"paramToRetrieve\"     : \"user_id\",\n      \"requestExcluded\"     : [\"post\"]\n    }\n  ]\n}\n```\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://gitlab.com/yocto-node-modules/yocto-api/issues"
  },
  "_id": "yocto-api@0.3.0",
  "_shasum": "6cc0f41f5d4769adc32a721f81e955b58d105bf5",
  "_from": "git+ssh://git@gitlab.com/yocto-node-modules/yocto-api.git",
  "_resolved": "git+ssh://git@gitlab.com/yocto-node-modules/yocto-api.git#ce25e66d3ae01d6e1b09d85b567744761070c418"
}
